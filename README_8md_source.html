<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MiRo-Training: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MiRo-Training
   </div>
   <div id="projectbrief">The aim of the project is to develop a software architecture for interacting with Miro using vocal and gestural commands.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor"> # [MiRo Training](https://emarolab.github.io/MiRo-training/)</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"> ## The Project</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor"></span> This Project has been developed <span class="keywordflow">for</span> the Social Robotics course of the master degree program in Robotics Engineering at University of Genoa.</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160; ### MiRo Companion Robot</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160; MiRo is a animal-like robot developed as a prototype companion.</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160; It was designed with a bio-inspired architecture based on the neuroscience knowledge of the mammalian brain.</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160; ### The Objective</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;The aim of the project is to develop a software architecture <span class="keywordflow">for</span> interacting with Miro <span class="keyword">using</span> vocal and gestural commands.</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;The robot attention is obtained through the vocal activation command **<span class="stringliteral">&quot;Miro&quot;</span>**.</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;Only after the activation command the robot is able to execute further commands.</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;The possibilities are the following:</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;* **<span class="stringliteral">&quot;Good&quot;</span>** - The robot expresses a cheerful and noisy behaviour and requires to be touched by the user to calm down.</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;* **<span class="stringliteral">&quot;Bad&quot;</span>** - The robot becomes upsed <span class="keywordflow">for</span> being scolded and turn its back to the user.</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;* **<span class="stringliteral">&quot;Let&#39;s go out&quot;</span>** - The robot leaves the charge to the user that can control its body movement with gestures. The gesture to use are summarized [here](https:<span class="comment">//ibb.co/6nLxgjw)</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;* **<span class="stringliteral">&quot;Play&quot;</span>** - The robot <span class="stringliteral">&quot;follows&quot;</span> the movement of a red ball.</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;* **<span class="stringliteral">&quot;Kill&quot;</span>** - The robot becomes angry. It lights up in red and produces pirate sounds.</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;* **<span class="stringliteral">&quot;Sleep&quot;</span>** - The robot goes in a resting mode. It disables the activation command. Hence, it is not able anymore to execute the other commands until a <span class="keyword">new</span> command <span class="stringliteral">&quot;Miro&quot;</span> wakes it up.</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160; ## [The Software Architecture](https:<span class="comment">//ibb.co/4MggTyw)</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160; The Software architecture can be seen by clicking on the section title. </div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160; It shows the ROS node (blocks) and the rostopic (blue) used by the nodes to communicate.</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160; Each module part of the architecture has been implemented as a ROS node. To make communication between the nodes possible, a Publish/Subscribe messaging pattern has been used.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160; The Architecture has been organized to be modular, scalable and reusable in few steps.</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; The characteristics of each node will be analysed more deeply in the following.</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">### Description of the Modules</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;* **command_recognition.py**: <span class="keyword">this</span> node handles the vocal commands and decides which of them MiRo has to be execute, by publishing on the */miro/rob01/platform/control* topic. In order to be reactive to the instructions, MiRo has to be awakened through the vocal command <span class="stringliteral">&quot;Miro&quot;</span>.</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;* **gbb_miro.py**: <span class="keyword">this</span> node is execute with the vocal command <span class="stringliteral">&quot;Let&#39;s go out&quot;</span> and handles the gesture based behaviour of Miro. The smartwatch publishes the IMU data on the *\inertial* topic. The **imu_data_map.py** node reads the accelerations<span class="stringliteral">&#39; values from the */inertial* topic and maps them into linear and angular velocities, publishing the resulting data on the */imu_mapping* topic. The **gbb_miro.py** node implements the gesture based behaviour in which the robot follows the user&#39;</span>s gestures. It publishes the linear and angular velocities on the */gbb* topic.</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;* **play.py**: <span class="keyword">this</span> node is executed with the vocal command <span class="stringliteral">&quot;Play&quot;</span> and publishes on the *\miro_play* topic. MiRo responds by following the red ball that the user shows him. The right and left camera of MiRo are used <span class="keywordflow">for</span> the ball detection. The **hsv_color_filter** node performs the color segmentation of the image obtained from the cameras and publishes on the */right-left/hsv_color_filter/image*. The segmented image is acquired by the **hough_circles** that detects round object, highlighting it with a red circle. If the red ball is detected in the right/left camera MiRo starts turning right/left, until the <span class="keywordtype">object</span> is contained in both the cameras. At <span class="keyword">this</span> point the robot starts moving towards the ball and when it reaches it, it stops.</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;* **bad.py**: <span class="keyword">this</span> node is executed with the vocal command <span class="stringliteral">&quot;Bad&quot;</span> and publishes on the */miro_bad* topic. MiRo responds to the reproach with a sad and offended behaviour. It lowers and inclines the head, rotates the ears and rotates to its left, showing the back to the user. At the end of the action the leds light up in red, expressing its upset state.</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;* **kill.py**: <span class="keyword">this</span> node is executed with the vocal command <span class="stringliteral">&quot;Kill&quot;</span> and publishes on the *\miro_kill*topic. MiRo responds with a angry behavior where it lights up in red and emitts pirate sounds.</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;* **good.py**: <span class="keyword">this</span> node is executed with the vocal command <span class="stringliteral">&quot;Good&quot;</span> and publishes on the *\miro_good* topic. MiRo tries to capture the user<span class="stringliteral">&#39;s attention by raising up his head and wagging the tail. In this mode the user can touch MiRo on the head or on the body, generating two different behaviours that depend on the values of the sensors published by the */miro_rob01_platform_sensors* topic. When the sensors of the head are activated the robot stops the tail, lowers and inclines the head, squint the eyes and the leds light up in pink. When the sensors on the body are activated the robot stops the tail, raises up the head, rotates the ears and the leds light up in orange. </span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="stringliteral">* **sleep.py**: this node is executed with the vocal command &quot;Sleep&quot; and publishes on the *\miro_sleep* topic. MiRo responds by entering in a rest mode. It lowers and inclines its head and tail, closes the eyes and the leds light up in aquamarine. In this mode the other vocal commands have no effect, unless it is activated with a new vocal command &quot;MiRo&quot;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="stringliteral"> </span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="stringliteral"> # Gettin Started</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="stringliteral"> ## Prerequisites</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="stringliteral"> ### ROS</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="stringliteral">This project is developed using [ROS](http://wiki.ros.org/kinetic/Installation/Ubuntu):</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="stringliteral">* rosdistro: kinetic</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="stringliteral">* rosversion: 1.12.13</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="stringliteral">### MiRo Workstation Setup</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="stringliteral">Download the [Miro Developer kit](http://labs.consequentialrobotics.com/miro/mdk/).</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="stringliteral">Follow the instructions from Consequential Robotics [Miro: Prepare Workstation](https://consequential.bitbucket.io/Developer_Preparation_Prepare_workstation.html) to set up your workstation to work with mthe robot. </span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="stringliteral">Strictly follow the instructions in the Install **mdk** section as the following steps will rely on this.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="stringliteral">Not necessary to make static IP for your workstation (laptop) while setting up connection with MiRo.</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="stringliteral">For a clear tutorial step-by-step you should visit [Emarolab Miro Repository](https://github.com/EmaroLab/MIRO.git).</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="stringliteral"> ### The wearable device</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="stringliteral"> In order to interact with MiRo through gestures, a smartwatch with a 9-axis IMU sensor has been used.</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="stringliteral"> [LG G WATCH R](https://www.lg.com/wearable-technology/lg-G-Watch-R-W110)</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="stringliteral">Follow the instructions reported in [imu_stream](https://github.com/EmaroLab/imu_stream) to download the app for both the smartphone and the smartwatch.</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="stringliteral">### Smartwatch and Smartphone Setup</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="stringliteral">In order to publish imu sensor data from your smartwatch to ROS nodes you must have a smartwatch paired with a smartphone.</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="stringliteral">The smartphone acts as the bridge between the smartwatch and the ros master running on your computer.</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="stringliteral">### MQTT ROS Bridge</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="stringliteral">In order to succesfully subscribe to MQTT topics and publish contents of MQTT messages to ROS follow the instruction in [mqtt_ros_bridge](https://github.com/EmaroLab/mqtt_ros_bridge/tree/feature/multiple_smartwatches).</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="stringliteral">To work with the current project some parameter must be modified in the imu_bridge.launch </span></div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="stringliteral">The parameter device_name must be changed with the name of your personal smartwatch. </span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="stringliteral">### ROS Based Speech Interface</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="stringliteral">In order to vocally interact with the robot we use a repository that contains an example for using a web interface to speak with the robot. It is based on Google Speech Demo for performing speech-to-text. We disabled the text-to-speech functionality.</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="stringliteral">For this project we used the mic in [LOGITECH Wireless Headset H600](https://www.logitech.com/it-it/product/wireless-headset-h600), but any microphone connected to your laptop should work pretty fine.</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="stringliteral">Create a catkin workspace and clone all the packages in the src folder</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="stringliteral">$ git clone https://github.com/EmaroLab/ros_verbal_interaction_node.git</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">For further information follow the instruction contained in [ros_verbal_interaction_node](https://github.com/EmaroLab/ros_verbal_interaction_node) repository.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="stringliteral">### OpenCV apps </span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="stringliteral">The images streaming from Miro&#39;</span>s camera are processed <span class="keyword">using</span> the <span class="keyword">package </span>[opencv_apps](http:<span class="comment">//wiki.ros.org/opencv_apps).</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;The camera frames are subject to color segmentation and hugh circles detection.</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;To install it:</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;```</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;$ git clone sudo apt install ros-kinetic-opencv-apps</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;```</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;### MiRo Training</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;Create a catkin workspace and clone all the packages in the src folder</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;```</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;$ git clone https:<span class="comment">//github.com/EmaroLab/MiRo-training.git</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;$ catkin_make</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;$ source devel/setup.bash</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;```</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;## Run the Project</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;Open a new terminal and launch</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;```</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;$ roscore</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;```</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;mosquitto must be running on your PC for the birdge to work.</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;In a new terminal</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;```</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;$ mosquitto</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;```</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;Make sure that the IP in the IMU_stream app on the smartphone is the same shown by doing</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;```</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;$ ifconfig</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;```</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;Open the IMU_stream app on the smartwatch </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;To test if the connection between smartwatch and ROS is working, start to transmitt the data from IMU_stream app on the smartwatch and check in a new terminal</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;```</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;$ rostopic echo \inertial</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;```</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;It should see the Imu data published by the smartwatch.</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;Connect the Miro robot to the ROS Master</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;```</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;$ ssh root@&lt;MIRO-IP&gt; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;$ sudo nano ./profile</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;```</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;Insert your IP after ROS_MASTER_IP</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;For more detailed instructions see [MIRO: Commission MIRO](https:<span class="comment">//consequential.bitbucket.io/Developer_Preparation_Commission_MIRO.html)</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;Open in a new terminal your catkin_ws</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;The following command will start the project</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;```</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;$ roslaunch command_handler command_handler.launch </div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;```</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;Parameters that is possible to change directly from the launch file:</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;* Robot --&gt; sim01 or rob01 (Default value)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    To switch from real robot to simulation ( You should launch Gazebo with miro sim as explained in [MIRO: Consequential Robotics](https:<span class="comment">//consequential.bitbucket.io/Developer_Preparation_Commission_MIRO.html)</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;* Node rate --&gt; 200 Hz (Default value)</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;* Color of the ball to detect --&gt; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    h_limit_min = 0; h_limit_max = 10; s_limit_min = 255; s_limit_max = 150; v_limit_min = 255; v_limit_max = 50;</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    Change the min and maximum HSV values to detect different colors.</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    To discover the HSV values of your favorite color, check [<span class="keyword">this</span>](https:<span class="comment">//alloyui.com/examples/color-picker/hsv).</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">## Results</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;Click the picture below <span class="keywordflow">for</span> demostration video.</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;[![MiRo-Training - SoRo](https:<span class="comment">//img.youtube.com/vi/DoKFgs3enpU/0.jpg)](https://www.youtube.com/watch?v=DoKFgs3enpU&amp;feature=youtu.be).</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;Each partecipant was asked to fill the [questionaire](http:<span class="comment">//bit.ly/MiroTrainingSurvey) in order to evaluate the interaction with the robot.</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="preprocessor">## Recommendations</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">## Acknowledgments</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;* [mqtt_ros_bridge](https:<span class="comment">//github.com/EmaroLab/mqtt_ros_bridge) </span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;* [imu_stream](https:<span class="comment">//github.com/EmaroLab/imu_stream)</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="preprocessor">### Team</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="preprocessor"></span>* Roberta Delrio *roberta.delrio@studio.unibo.it*</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;* Valentina Pericu *valentina.pericu.@gmail.com*</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
